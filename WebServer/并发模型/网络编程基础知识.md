---
title: 网络编程基础知识
updated: 2025-03-09T14:03:11
created: 2025-03-08T16:35:36
---

详情见：

<https://blog.csdn.net/qq_57392653/article/details/131600797>

### 传输层的两个代表性的协议：
**`TCP和UDP`**<br>
**TCP协议：Transport Control Protocol 传输层控制协议**<br>
TCP协议在确定对方能通信的前提下才会传输数据，如果不能通信，则发送方会一直发送请求包，直到对方回应，双方建立连接，开始传输数据。

TCP协议是数据无误，数据无丢失、数据无失序、数据无重复到达的通信协议。

**UDP协议：User Datagram Protocol 用户数据报协议**<br>
不可靠的无连接的协议，数据在发送之前，不需要建立连接，数据传输效率会高

UDP协议不会确定目标是否通信，只管往外发数据。
总结：`TCP可靠稳定、UDP效率高`


### 网络层：
将数据传输到目标地址，负责寻址和路由选择，主要由IP、ICMP组成。
### 网络数据的传输：
网卡有唯一的MAC地址。理论上，只依靠MAC地址，就可以实现网络通信；但是以太网以广播方式发送数据包，处于同一局域网内的设备都能收到，效率低；且广播方式局限于发送者所在的子网（通信双方不在同一个子网，广播不能传递出去）

因此，需要区分哪些MAC地址属于同一个子网，是采用广播方式，否则采用“路由选择”。

“网络层”由此诞生，引用一套新的地址，区分不同计算机是否属于同一个子网，称为“网络地址”。

每台计算机有两种地址，一个是MAC地址，由硬件（网卡）决定；另一种是网络地址，由软件获得。

### 互联网地址（IP地址，Internet Protocol Address）：
分为两类：IPv4（32bits）、IPv6（128bits），理论上IPv4能提供2^32个IP，IPv6能提供2^128个IP。

IPv4 32bits分为两部分：**网段号和主机号**

`网段号`：标识哪一个网段，如同一个路由器下的主机的IP的网段相同

`主机号`：标识子网中的不同主机

一般来说，每8bits一个数字，中间用.隔开：192.168.31.8

NETMASK：子网掩码：指定一个IP地址中，哪些bits是网段号、哪些是主机号

简单来说，netmask为1的是网段号，为0的是主机号

> 如：netmask：255.255.255.0 -->IP中的高三字节为网段号、低一字节为主机号

并不是所有的掩码都是合法的，1和0必须是连续的：

> 255.255.114.0：1111 1111 1111 1111 0111 0010 0000 0000 // 不合法

> 255.255.192.0：1111 1111 1111 1111 1100 0000 0000 0000 // 合法

由于资源有限，往往一个局域网才拥有一个IP。网络通信时，必须要知道对方的IP，实际上数据包已经附带了IP，把数据包发送到路由器后，路由器会根据IP地址找到对方的位置，完成一次数据传递

IP地址只能定位到一个局域网，无法定位到一台计算机，只能依靠MAC地址，局域网中的路由器会记录每台计算机的MAC地址。

有了IP和MAC地址，只能找到目标计算机，仍不能通信，计算机能够收取数据包，但是不知道哪个网络程序来处理，通信失败。

为了区分不同的网络程序，计算机会为每一个网络程序分配一个独一无二的端口号（Port）

### 端口号：
TCP和UDP采用16bits的端口号来标识网络程序。

**TCP端口号和UDP端口号是独立的。**

一台主机上的网络应用程序的地址：

>MAC地址+IP地址+传输层协议（TCP/UDP）+端口号

网络字节序：
UDP/TCP协议规定：把收到的第一个字节当作高字节看待，要求发送的第一个字节必须是高位字节。

**是`大端字节序`**
