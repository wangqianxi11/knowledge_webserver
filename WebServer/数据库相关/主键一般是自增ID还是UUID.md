---
title: 主键一般是自增ID还是UUID
updated: 2025-06-15T17:08:08
created: 2025-06-13T16:29:20
---

### 一、概念简介
| **类型** | **描述** |
|----|----|
| 自增 ID | 数据库自动生成的递增整数（如 1,2,3…） |
| UUID | 全球唯一标识符，通常是 128 位随机字符串（如 550e8400-e29b-41d4-a716-446655440000） |

### 二、对比分析
| **对比维度** | **自增 ID（INT/BIGINT）** | **UUID（如 UUIDv4）** |
|----|----|----|
| **唯一性范围** | 本地唯一（单库/单表） | 全球唯一（多库/分布式系统友好） |
| **性能** | 更快，索引插入有序，**页分裂少** | 较慢，索引插入无序，**页分裂严重** |
| **可读性** | 简短、连续，便于阅读 | 长且复杂，不适合人眼阅读 |
| **外键引用** | 索引效率高 | 外键索引开销大 |
| **安全性/暴露性** | 可猜测（如 ID=123） | 难以猜测，适合对外接口数据标识 |
| **合并数据集** | 合并不同库时可能冲突 | UUID 合并天然无冲突 |
| **主键长度** | 占 4～8 字节 | 占 16 字节或更多（影响存储和索引大小） |
| **InnoDB聚簇索引** | 有序插入性能极佳 | 无序插入导致频繁页分裂 |

### 三、常见选择建议
**选择 自增 ID 的场景：**
- 单数据库/单服务系统
- 对性能敏感（写入量大）
- 表间关联多（依赖外键）
- 不需要对外暴露 ID（内部系统）
  
**选择 UUID 的场景：**
- 分布式系统、多节点并发写入
- 数据合并或同步频繁（防冲突）
- 需要对外暴露 ID（如 REST API 中的 /user/uuid）
- 不希望用户猜测资源数量或顺序
