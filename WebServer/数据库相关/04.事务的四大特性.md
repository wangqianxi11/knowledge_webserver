---
title: 事务的四大特性
updated: 2025-06-15T16:48:49
created: 2025-04-15T10:09:55
---

## 一、事务的定义

事务（Transaction） 是由一条或多条 SQL 语句组成的逻辑执行单元，它们**要么全部成功执行，要么全部回滚撤销**。

常见应用场景：

- 银行转账：从账户 A 扣钱，同时给账户 B 加钱；

- 电商下单：减库存、生成订单、扣用户余额；

- 日志记录：主操作失败时日志也要撤销。

## 事务特性
**ACID**：**原子性（Atomicity）、一致性（Consistency）、隔离性（Isolation）、持久性（Durability）**。

- **原子性**是指事务包含的所有操作要么全部成功，要么全部失败回滚。

- **一致性**是指一个事务执行之前和执行之后都必须处于一致性状态。比如a与b账户共有1000块，两人之间转账之后无论成功还是失败，它们的账户总和还是1000。

- **隔离性**跟隔离级别相关，如read committed，一个事务只能读到已经提交的修改。

- **持久性**是指一个事务一旦被提交了，那么对数据库中的数据的改变就是永久性的，即便是在数据库系统遇到故障的情况下也不会丢失提交事务的操作。


### 三、MySQL 中的事务控制语句
### 开启事务
```sql
START TRANSACTION;
-- 或
BEGIN;
```

### 提交事务（保存修改）
```sql
COMMIT;
```

### 回滚事务（撤销修改）
```sql
ROLLBACK;
```

### 设置保存点
```sql
SAVEPOINT sp1;
ROLLBACK TO sp1;
```