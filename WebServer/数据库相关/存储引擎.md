---
title: 存储引擎
updated: 2025-08-23T16:55:57
created: 2025-04-15T10:26:30
---

MySQL中常用的四种存储引擎分别是：MyISAM、InnoDB、MEMORY、ARCHIVE。MySQL 5.5版本后默认的存储引擎为==InnoDB==。
## InnoDB存储引擎
InnoDB是MySQL默认的事务型存储引擎，使用最广泛，基于聚簇索引建立的。
- **完全支持ACID事务特性**，是MySQL成为可靠关系型数据库的关键。
- **行级锁**：只在需要的时候锁定涉及的行，提高并发和可靠
- 支持外键约束
- MVCC：多版本并发控制实现非锁定读
- 崩溃恢复：重启后自动恢复数据到一致状态
- 聚集索引，基于主键查询很快。
**InnoDB内部做了很多优化，如能够自动在内存中创建自适应hash索引，以加速读操作。**
优点：支持事务和崩溃修复能力；引入了行级锁和外键约束。
缺点：占用的数据空间相对较大。
适用场景：需要事务支持，并且有较高的并发读写频率。

## MyISAM存储引擎
数据以紧密格式存储。对于只读数据，或者表比较小、可以容忍修复操作，可以使用MyISAM引擎。MyISAM会将表存储在两个文件中，数据文件==.MYD==和索引文件==.MYI==。
- **不支持事务**：无法回滚操作
- 表级锁：任何写操作都会锁表，**写并发高时性能差**
- 全文索引
- 高速读：纯读操作可能更快
优点：访问速度快。
缺点：**MyISAM不支持事务和行级锁**，**不支持崩溃后的安全恢复**，也不支持外键。
适用场景：对事务完整性没有要求；表的数据都会只读的。

# Memory引擎
**特点：**
- 数据存储在内存中：
- 表级锁：
- 不支持变长数据类型
- 服务器崩溃后，表结构保留，但数据全部丢失。
适用场景：
- 临时表：Mysql查询执行时内部创建的临时表
- 缓存：存储不重要的、需要极快访问速度的临时数据、如会话
**注意：Memcached/redis等专业缓存中间件通常比Memory更好的选择**

# Archive引擎
**特点：**
- 极高的压缩比：适合存储大量、很少访问的历史归档数据
- 只支持INSERT和SELECT，不支持UPDATE/DELETE（支持行级锁是为了插入，而非修改）
- 查询速度比InnoDB慢
适用场景：
- 日志记录、审计数据、大量历史订单**等归档数据存储**

<table>
<colgroup>
<col style="width: 15%" />
<col style="width: 22%" />
<col style="width: 23%" />
<col style="width: 20%" />
<col style="width: 18%" />
</colgroup>
<thead>
<tr class="header">
<th>特性</th>
<th>InnoDB</th>
<th>MyISAM(已过时)</th>
<th>Memory</th>
<th>Archive</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>事务支持</td>
<td>支持(ACID)</td>
<td>不支持</td>
<td>不支持</td>
<td>不支持</td>
</tr>
<tr class="even">
<td>锁粒度</td>
<td>行级锁</td>
<td>表级锁</td>
<td>表级锁</td>
<td>行级锁</td>
</tr>
<tr class="odd">
<td>外键支持</td>
<td>支持</td>
<td>不支持</td>
<td>不支持</td>
<td>不支持</td>
</tr>
<tr class="even">
<td>存储限制</td>
<td>64TB</td>
<td>256TB</td>
<td>受内存限制</td>
<td>无（但压缩）</td>
</tr>
<tr class="odd">
<td>MVCC</td>
<td>支持</td>
<td>不支持</td>
<td>不支持</td>
<td>不支持</td>
</tr>
<tr class="even">
<td>崩溃恢复</td>
<td>支持(crash-safe)</td>
<td>较弱</td>
<td>数据丢失（内存）</td>
<td>支持</td>
</tr>
<tr class="odd">
<td>全文索引</td>
<td>支持(5.6+)</td>
<td>支持</td>
<td>不支持</td>
<td>不支持</td>
</tr>
<tr class="even">
<td>地理空间</td>
<td>支持</td>
<td>支持</td>
<td>不支持</td>
<td>不支持</td>
</tr>
<tr class="odd">
<td>压缩</td>
<td>支持</td>
<td>是（只读）</td>
<td>否</td>
<td>极高压缩</td>
</tr>
<tr class="even">
<td>主要应用场景</td>
<td><p><strong>绝大多数场景</strong></p>
<p>事务型应用、高并发</p></td>
<td><p>只读或读多写少</p>
<p>（现已不推荐使用）</p></td>
<td><p>临时表、缓存</p>
<p>高速临时数据处理</p></td>
<td><p>日志、归档</p>
<p>大量历史数据存储</p></td>
</tr>
</tbody>
</table>
