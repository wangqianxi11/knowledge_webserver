---
title: 程序运行的步骤是什么
updated: 2025-04-15T11:10:08
created: 2025-04-15T11:09:56
---

## 程序运行的步骤是什么
### 预编译/编译预处理(预处理器 (Preprocessor))
- 展开头文件 #include：将指定的头文件内容完整地复制到源文件中。

- 宏替换 #define：将所有定义的宏展开，替换成其定义的文本。

- 条件编译 #ifdef, #if：根据条件保留或剔除特定代码块。

- 删除注释：移除所有注释，减少后续编译的数据量。

**输出**: 一个经过“净化”和“展开”的中间文件 (在GCC中通常为 .i 文件)。此时仍然是纯文本文件。

### 编译 (Compiler)
- 进行严格的语法和语义分析（词法分析、语法分析、语义分析）。

- 生成与特定硬件平台相关的汇编代码 (Assembly Code)。这是一种人类勉强能读的低级语言，与机器指令一一对应。

**输出**: 汇编代码文件 (在GCC中通常为 .s 文件)。仍然是文本文件。

### 汇编(Assembler)
- 将汇编代码一对一地翻译成机器可以直接识别的机器指令 (Machine Code)，即二进制0和1。

**输出**: 目标文件 (Object File) (如 main.o 或 main.obj)。此时已是二进制文件，但还不能运行。
### 链接(Linker)
- 地址和空间分配：为所有目标文件分配最终的内存地址。

- 符号解析：解决目标文件之间的交叉引用。例如，你的 main.o 中调用了 printf() 函数，链接器负责找到 printf() 函数在标准库中的实现地址，并将其“粘贴”到正确的位置。

- 重定位：根据分配到的实际地址，调整代码中的地址引用。

**输出**: 最终的可执行文件 (如 a.out, main.exe)。这是一个完整的、可以直接被操作系统加载运行的二进制文件。


