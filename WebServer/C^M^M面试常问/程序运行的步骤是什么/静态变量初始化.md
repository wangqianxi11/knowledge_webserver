---
title: 静态变量初始化
updated: 2025-08-22T18:45:16
created: 2025-04-15T14:52:05
---

**静态变量，全局变量，常量都在编译阶段完成初始化和内存分配**。
其他变量都是在编译阶段进行初始化，运行阶段内存分配.。

### C++ 中的静态变量（static variable）
**概念：**
static 修饰的变量具有**静态存储期**，即它的**生命周期为整个程序运行期**，无论它是否局部定义。
### 分类：
#### 1. 局部静态变量
```c++

void func() {

static int count = 0;

count++;

std::cout << count << std::endl;

}
```
- 每次调用 func()，count 不会重新初始化
- 生命周期跨越整个程序，但作用域仍局限于函数内部
- 常用于懒汉式单例、计数器、缓存等

#### 2. 类的静态成员变量
```c++

class MyClass {

public:

static int value;

};

int MyClass::value = 10;

```
- 属于整个类，而不属于某个对象实例
- 不占用对象内存
- 可以通过 MyClass::value 或对象访问
- 常用于全局共享状态

### 二、C++ 中的“静态类”（更准确说法：工具类或只包含静态成员的类）
**C++ 没有“static class”这种关键字，但我们可以定义一个类，其所有成员都是静态的，并通过禁止构造函数实现“类不可实例化”：**
```c++

class Utils {

public:

static void printHello();

private:

Utils() = delete; // 禁止创建对象

};
```

**特点：**
- 所有成员函数和成员变量都是静态的
- 类不能被实例化（通过 delete 构造函数或私有化）
- 类似于 Java 的 static class 或 C 的 namespace
- 常用于**工具函数集合、日志系统、配置管理器等**

**三、对比总结**
| **特性** | **静态变量（static）** | **静态类（只含静态成员的类）** |
|----|----|----|
| 存储位置 | 全局/静态区 | 类中静态成员同样在静态区 |
| 生命周期 | 程序运行期间 | 程序运行期间 |
| 是否属于类对象 | 否（局部 static 属于函数） | 是，属于类，但与对象无关 |
| 是否可实例化 | 是（静态变量） | 通常禁止实例化 |
| 常用场景 | 缓存、计数器、单例中的懒加载等 | 工具类、日志类、全局配置等 |
| 访问方式 | 作用域内直接访问 | ClassName::member |
