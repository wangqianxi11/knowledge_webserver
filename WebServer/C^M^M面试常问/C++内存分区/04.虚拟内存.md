---
title: 虚拟内存
updated: 2025-05-08T16:00:54
created: 2025-05-08T15:10:31
---
## 虚拟内存
### 目的：
1.  **地址空间隔离（安全性）**
    1.  每个进程**有独立的虚拟地址空间**，不会访问其他进程的内存
    2.  
2.  **简化编程模型**：
    1.  程序可以像操作连续内存一样使用地址，系统自动完成分页/映射等处理
3.  **支持更大的地址空间**：
    1.  允许程序使用的虚拟地址空间远大于**物理内存**
    2.  未访问的内存页可以只在磁盘上
4.  **减少内存碎片**

**虚拟地址的目的在于：提升系统安全性、可扩展性、易用性，并让进程以统一且抽象的方式访问内存。**

操作系统**为运行中的C++程序提供独立且隔离的地址空间**

本质是操作系统+MMU联合提供的机制：
- 每个进程看到的内存是`连续的、从0开始的虚拟地址空间`
- 实际物理内存可能分散，甚至为映射
- 虚拟内存通过页表映射到物理内存
- 提供进程隔离、安全性和内存扩展能力

即<b>C++的内存操作（如指针、new、malloc、栈帧）</b>都发生在操作系统提供的虚拟地址空间中。

### 如何实现？
1.  虚拟地址和物理地址的映射
    1.  由硬件中的内存管理单元实现
    2.  使用页表
2.  分页机制
    1.  降内存划分为固定大小的页面
    2.  虚拟地址空间被映射到若干页
3.  页表结构
    1.  Tlb

